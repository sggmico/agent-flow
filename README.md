# Agent Flow

<div align="center">

<h4> è®© AI Agent åä½œè§¦æ‰‹å¯åŠ </h4>

ä¸€ä¸ªç°ä»£åŒ–çš„ AI Agent åä½œå¹³å°ï¼Œé€šè¿‡å¯è§†åŒ–ç•Œé¢è½»æ¾åˆ›å»ºã€ç¼–æ’å’Œç›‘æ§ AI Agent

[åŠŸèƒ½ç‰¹æ€§](#-æ ¸å¿ƒç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ¯ é¡¹ç›®ç®€ä»‹

Agent Flow è‡´åŠ›äºå°† AI ä»"é—®ç­”å·¥å…·"å‡çº§ä¸º"å¯åä½œã€å¯å®¡è®¡ã€å¯æ‰§è¡Œçš„å·¥ä½œç³»ç»Ÿ"ã€‚é€šè¿‡ç›´è§‚çš„å¯è§†åŒ–ç•Œé¢ï¼Œå¼€å‘è€…å¯ä»¥ï¼š

- **å¯è§†åŒ–ç¼–æ’**ï¼šæ‹–æ‹½å¼è®¾è®¡ AI Agent å·¥ä½œæµï¼Œæ— éœ€ç¼–å†™å¤æ‚ä»£ç 
- **å¤š Agent åä½œ**ï¼šè®©å¤šä¸ªä¸“ä¸š Agent ååŒå®Œæˆå¤æ‚ä»»åŠ¡
- **å®æ—¶ç›‘æ§**ï¼šè¿½è¸ªæ¯ä¸ª Agent çš„æ‰§è¡ŒçŠ¶æ€å’Œç»“æœ
- **æ™ºèƒ½ä»£ç ç†è§£**ï¼šåŸºäºå‘é‡æœç´¢çš„ä»£ç è¯­ä¹‰é—®ç­”
- **è´¨é‡ä¿è¯**ï¼šå†…ç½®ä»£ç å®¡æŸ¥ã€å®‰å…¨æ‰«æç­‰ä¸“ä¸šå·¥å…·

### åº”ç”¨åœºæ™¯

- **ä»£ç å®¡æŸ¥è‡ªåŠ¨åŒ–**ï¼šå¤šä¸ª Agent å¹¶è¡Œæ£€æŸ¥å®‰å…¨æ€§ã€æ€§èƒ½ã€æœ€ä½³å®è·µ
- **æ–‡æ¡£ç”Ÿæˆ**ï¼šè‡ªåŠ¨åˆ†æä»£ç åº“ç”Ÿæˆ API æ–‡æ¡£ã€æ¶æ„è¯´æ˜
- **æ™ºèƒ½ä»£ç åŠ©æ‰‹**ï¼šåŸºäºé¡¹ç›®ä¸Šä¸‹æ–‡çš„ç²¾å‡†ä»£ç é—®ç­”
- **å·¥ä½œæµè‡ªåŠ¨åŒ–**ï¼šä¸²è”å¤šä¸ª AI èƒ½åŠ›å®Œæˆå¤æ‚å¼€å‘ä»»åŠ¡

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### Agent ç®¡ç†

- æ”¯æŒ Claude Sonnet 4ã€GPT-4oã€Gemini 2.0 Flash ç­‰ä¸»æµæ¨¡å‹
- çµæ´»çš„è§’è‰²å®šä¹‰å’Œèƒ½åŠ›é…ç½®
- å¯å¤ç”¨çš„ Agent æ¨¡æ¿

### å·¥ä½œæµç¼–æ’

- åŸºäº React Flow çš„å¯è§†åŒ–ç¼–è¾‘å™¨
- æ”¯æŒä¸²è¡Œã€å¹¶è¡Œã€æ¡ä»¶ã€å¾ªç¯ç­‰æ‰§è¡Œæ¨¡å¼
- å®æ—¶é¢„è§ˆå·¥ä½œæµæ‰§è¡Œè¿‡ç¨‹

### ä»£ç åº“æ™ºèƒ½ç´¢å¼•

- æ”¯æŒ TypeScriptã€JavaScriptã€Python ç­‰è¯­è¨€
- pgvector å‘é‡æœç´¢ï¼Œ10-30ms æŸ¥è¯¢å“åº”
- æ™ºèƒ½ä»£ç åˆ†å—å’Œè¯­ä¹‰ç†è§£

### AI å¯¹è¯ä¸é—®ç­”

- åŸºäºä»£ç ä¸Šä¸‹æ–‡çš„ç²¾å‡†é—®ç­”
- æµå¼å“åº”ï¼Œå®æ—¶æ˜¾ç¤ºç”Ÿæˆè¿‡ç¨‹
- ä¿æŒå¯¹è¯å†å²ï¼Œæ”¯æŒå¤šè½®äº¤äº’

### ä»£ç å®¡æŸ¥

- å®‰å…¨æ€§ã€æ€§èƒ½ã€æœ€ä½³å®è·µå¤šç»´åº¦æ£€æŸ¥
- é›†æˆ Semgrep ç­‰ä¸“ä¸šå·¥å…·
- ç”Ÿæˆè¯¦ç»†çš„å®¡æŸ¥æŠ¥å‘Šå’Œä¿®å¤å»ºè®®

### å¤šç«¯æ”¯æŒï¼ˆè§„åˆ’ä¸­ï¼‰

- Web åº”ç”¨ï¼ˆMVPï¼‰
- æ¡Œé¢åº”ç”¨ï¼ˆTauriï¼‰
- VS Code æ‰©å±•
- CLI å·¥å…·

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯

- **æ¡†æ¶**ï¼šNext.js 15 (App Router)
- **è¯­è¨€**ï¼šTypeScript 5.x
- **UI**ï¼šTailwind CSS + shadcn/ui
- **çŠ¶æ€ç®¡ç†**ï¼šZustand + TanStack Query
- **å·¥ä½œæµç¼–è¾‘å™¨**ï¼šReact Flow

### åç«¯ä¸æ•°æ®

- **æ•°æ®åº“**ï¼šPostgreSQL 16+ (å« pgvector æ‰©å±•)
- **ORM**ï¼šDrizzle ORMï¼ˆ100% ç±»å‹å®‰å…¨ï¼‰
- **å‘é‡æœç´¢**ï¼špgvector
- **ç¼“å­˜**ï¼šRedis / Upstash Redis

### AI å¼•æ“

- **æ¡†æ¶**ï¼šMastraï¼ˆTypeScript åŸç”Ÿ agent æ¡†æ¶ï¼‰
- **LLM**ï¼šClaudeã€GPT-4ã€Gemini
- **Embeddings**ï¼šOpenAI text-embedding-3-large

### å·¥å…·é“¾

- **åŒ…ç®¡ç†å™¨**ï¼špnpm
- **Monorepo**ï¼špnpm workspace
- **Linter/Formatter**ï¼šBiome
- **æµ‹è¯•**ï¼šVitest + Playwright
- **éƒ¨ç½²**ï¼šVercel + Neon/Supabase

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20.0.0
- PostgreSQL >= 16.0 (éœ€è¦ pgvector æ‰©å±•)
- Redis >= 7.0
- pnpm >= 8.0

### å®‰è£…æ­¥éª¤

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/agent-flow.git
cd agent-flow

# 2. å®‰è£…ä¾èµ–
pnpm install

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹é…ç½®ï¼š
# - DATABASE_URL (PostgreSQL è¿æ¥å­—ç¬¦ä¸²)
# - REDIS_URL (Redis è¿æ¥å­—ç¬¦ä¸²)
# - OPENAI_API_KEY (ç”¨äº embeddings)
# - ANTHROPIC_API_KEY (ç”¨äº Claude)

# 4. åˆå§‹åŒ–æ•°æ®åº“
pnpm db:migrate

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

è®¿é—® http://localhost:3000 å¼€å§‹ä½¿ç”¨ï¼

### æ•°æ®åº“é…ç½®

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Neon æˆ– Supabaseï¼Œè¯·ç¡®ä¿å¯ç”¨ pgvector æ‰©å±•ï¼š

```sql
CREATE EXTENSION IF NOT EXISTS vector;
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
agent-flow/
â”œâ”€â”€ apps/                    # å¹³å°ç‰¹å®šåº”ç”¨
â”‚   â””â”€â”€ web/                # Next.js Web åº”ç”¨
â”œâ”€â”€ packages/               # å…±äº«ä»£ç 
â”‚   â”œâ”€â”€ shared/            # ä¸šåŠ¡é€»è¾‘ (100% å…±äº«)
â”‚   â”œâ”€â”€ ui/                # React ç»„ä»¶ (90% å…±äº«)
â”‚   â”œâ”€â”€ database/          # Drizzle schemas
â”‚   â””â”€â”€ mastra/            # AI agent é…ç½®
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ spec.md            # åŠŸèƒ½è§„æ ¼è¯´æ˜
â”‚   â””â”€â”€ local/             # ç§æœ‰è§„åˆ’æ–‡æ¡£
â”œâ”€â”€ CLAUDE.md              # AI å¼€å‘æŒ‡å—
â””â”€â”€ README.md              # æœ¬æ–‡ä»¶
```

---

## ğŸ”§ å¼€å‘æŒ‡å—

### å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
pnpm dev                    # å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm build                  # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm start                  # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨

# æ•°æ®åº“
pnpm db:generate            # ç”Ÿæˆæ•°æ®åº“è¿ç§»
pnpm db:migrate             # è¿è¡Œæ•°æ®åº“è¿ç§»
pnpm db:studio              # æ‰“å¼€ Drizzle Studio

# ä»£ç è´¨é‡
pnpm check                  # è¿è¡Œ Biome æ£€æŸ¥
pnpm check:fix              # è‡ªåŠ¨ä¿®å¤é—®é¢˜
pnpm type-check             # TypeScript ç±»å‹æ£€æŸ¥

# æµ‹è¯•
pnpm test                   # è¿è¡Œå•å…ƒæµ‹è¯•
pnpm test:coverage          # ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm test:e2e               # è¿è¡Œ E2E æµ‹è¯•
```

### æŠ€æœ¯çº¦æŸ

ä¸ºäº†ä¿æŒæ¶æ„ç®€æ´å’Œæ€§èƒ½æœ€ä¼˜ï¼Œé¡¹ç›®éµå¾ªä»¥ä¸‹çº¦æŸï¼š

- ä½¿ç”¨ **PostgreSQL + pgvector**ï¼ˆä¸ä½¿ç”¨ Pinecone/Chromaï¼‰
- ä½¿ç”¨ **Drizzle ORM**ï¼ˆä¸ä½¿ç”¨ Prismaï¼‰
- ä½¿ç”¨ **Biome**ï¼ˆä¸ä½¿ç”¨ ESLint + Prettierï¼‰
- ä½¿ç”¨ **pnpm workspace**ï¼ˆä¸ä½¿ç”¨ Turborepoï¼‰
- ä¼˜å…ˆä½¿ç”¨ **Server-Sent Events**ï¼ˆä»…å¿…è¦æ—¶ä½¿ç”¨ WebSocketï¼‰

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼æ— è®ºæ˜¯æŠ¥å‘Š Bugã€æå‡ºæ–°åŠŸèƒ½å»ºè®®ï¼Œè¿˜æ˜¯æäº¤ä»£ç æ”¹è¿›ã€‚

### å‚ä¸æ–¹å¼

1. **Fork æœ¬ä»“åº“**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯** (`git checkout -b feature/amazing-feature`)
3. **æäº¤æ›´æ”¹** (`git commit -m 'feat: æ·»åŠ æŸä¸ªå¾ˆæ£’çš„åŠŸèƒ½'`)
4. **æ¨é€åˆ°åˆ†æ”¯** (`git push origin feature/amazing-feature`)
5. **åˆ›å»º Pull Request**

### æäº¤è§„èŒƒ

æˆ‘ä»¬ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```bash
feat(agents): æ·»åŠ  Agent åˆ›å»º API
fix(workflow): ä¿®å¤æ‰§è¡Œæ­»é”é—®é¢˜
docs: æ›´æ–° README æ–‡æ¡£
refactor(db): è¿ç§»åˆ° Drizzle ORM
```

### ä»£ç è´¨é‡è¦æ±‚

- æ‰€æœ‰æ–°åŠŸèƒ½éœ€è¦æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆè¦†ç›–ç‡ â‰¥ 80%ï¼‰
- é€šè¿‡ Biome æ£€æŸ¥ (`pnpm check`)
- é€šè¿‡ TypeScript ç±»å‹æ£€æŸ¥ (`pnpm type-check`)
- API å˜æ›´éœ€è¦æ›´æ–° `docs/spec.md`

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹ä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼š

- [Next.js](https://nextjs.org/) - React æ¡†æ¶
- [Mastra](https://mastra.ai/) - AI Agent æ¡†æ¶
- [Drizzle ORM](https://orm.drizzle.team/) - TypeScript ORM
- [pgvector](https://github.com/pgvector/pgvector) - PostgreSQL å‘é‡æ‰©å±•
- [React Flow](https://reactflow.dev/) - å·¥ä½œæµç¼–è¾‘å™¨
- [Biome](https://biomejs.dev/) - å·¥å…·é“¾

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚
